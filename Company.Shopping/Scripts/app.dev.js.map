{"version":3,"sources":["app.dev.js","states/products/products-module.js","states/products/products-controller.js","states/checkout/checkout-module.js","states/checkout/checkout-controller.js","states/admin/admin-module.js","states/admin/edit-product-controller.js","states/admin/create-product-controller.js","states/admin/admin-controller.js","directives/rating/rating.js","directives/basket-status/basket-status.js","services/products-service.js","services/order-service.js","services/basket.js","app.js","header-controller.js"],"names":["angular","module","config","$stateProvider","appPath","state","url","templateUrl","controller","controllerAs","resolve","products","productsService","getProducts","ProductsController","basket","vm","addToBasket","product","add","isProductInBasket","getProductAmount","id","CheckoutController","$state","orderService","address","getEmptyAddress","loadBasketProducts","increase","decrease","remove","clearBasket","clear","submit","basketAmounts","getProductAmounts","orderAmounts","key","push","productId","amount","order","deliveryAddress","placeOrder","then","alert","go","getTotal","basketProducts","firstName","lastName","firstAddressLine","secondAddressLine","postCode","city","parent","$stateParams","getProduct","EditProductController","updateProduct","onProductUpdated","CreateProductController","createProduct","onProductCreated","ProductManagementController","deleteProduct","onProductDeleted","directive","link","scope","stars","length","rating","restrict","basketStatusDirective","element","getTotalItems","count","replace","factory","$http","apiPath","get","response","data","put","post","delete","productAmount","Object","create","totalItems","filter","p","total","forEach","price","$urlRouterProvider","$logProvider","debug","debugEnabled","otherwise","run","$log","info","HeaderController","shouldShowBasketStatus","includes"],"mappings":"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","file":"app.dev.js","sourcesContent":["    (function (window, document, angular) {\r\n      'use strict';\r\n      angular.module('products', [\r\n        'ui.router',\r\n        'env'\r\n      ]).config(function ($stateProvider, appPath) {\r\n        $stateProvider.state('products', {\r\n          url: '/',\r\n          templateUrl: appPath + '/scripts/states/products/products.html',\r\n          controller: 'ProductsController',\r\n          controllerAs: 'vm',\r\n          resolve: {\r\n            products: function products(productsService) {\r\n              return productsService.getProducts();\r\n            }\r\n          }\r\n        });\r\n      });\r\n      'use strict';\r\n      angular.module('products').controller('ProductsController', function ProductsController(products, basket) {\r\n        var vm = this;\r\n        vm.products = products;\r\n        vm.addToBasket = function (product) {\r\n          return basket.add(product);\r\n        };\r\n        vm.isProductInBasket = function (product) {\r\n          return !!basket.getProductAmount(product.id);\r\n        };\r\n        vm.getProductAmount = function (product) {\r\n          return basket.getProductAmount(product.id);\r\n        };\r\n      });\r\n      'use strict';\r\n      angular.module('checkout', [\r\n        'ui.router',\r\n        'env'\r\n      ]).config(function ($stateProvider, appPath) {\r\n        $stateProvider.state('checkout', {\r\n          url: '/checkout',\r\n          templateUrl: appPath + '/scripts/states/checkout/checkout.html',\r\n          controller: 'CheckoutController',\r\n          controllerAs: 'vm'\r\n        });\r\n      });\r\n      'use strict';\r\n      angular.module('checkout').controller('CheckoutController', function CheckoutController($state, basket, orderService) {\r\n        var vm = this;\r\n        vm.address = getEmptyAddress();\r\n        loadBasketProducts();\r\n        vm.getProductAmount = function (product) {\r\n          return basket.getProductAmount(product.id);\r\n        };\r\n        vm.increase = function (product) {\r\n          basket.add(product);\r\n        };\r\n        vm.decrease = function (product) {\r\n          basket.remove(product);\r\n          loadBasketProducts();\r\n        };\r\n        vm.clearBasket = function () {\r\n          basket.clear();\r\n          vm.address = getEmptyAddress();\r\n        };\r\n        vm.submit = function () {\r\n          var basketAmounts = basket.getProductAmounts();\r\n          var orderAmounts = [];\r\n          for (var key in basketAmounts) {\r\n            orderAmounts.push({\r\n              productId: key,\r\n              amount: basketAmounts[key]\r\n            });\r\n          }\r\n          var order = {\r\n            deliveryAddress: vm.address,\r\n            products: orderAmounts\r\n          };\r\n          orderService.placeOrder(order).then(function () {\r\n            basket.clear();\r\n            // TODO: show the success message in the modal dialogue or as a floating message.\n            alert('Your order has been successfully placed.');\r\n            $state.go('products');\r\n          });\r\n        };\r\n        vm.getTotal = function () {\r\n          return basket.getTotal();\r\n        };\r\n        function loadBasketProducts() {\r\n          vm.basketProducts = basket.getProducts();\r\n        }\r\n        function getEmptyAddress() {\r\n          return {\r\n            firstName: '',\r\n            lastName: '',\r\n            firstAddressLine: '',\r\n            secondAddressLine: '',\r\n            postCode: '',\r\n            city: ''\r\n          };\r\n        }\r\n      });\r\n      'use strict';\r\n      angular.module('admin', [\r\n        'ui.router',\r\n        'env'\r\n      ]).config(function ($stateProvider, appPath) {\r\n        $stateProvider.state('admin', {\r\n          url: '/admin',\r\n          templateUrl: appPath + '/scripts/states/admin/admin.html',\r\n          controller: 'ProductManagementController',\r\n          controllerAs: 'vm',\r\n          resolve: {\r\n            products: function products(productsService) {\r\n              return productsService.getProducts();\r\n            }\r\n          }\r\n        }).state('create', {\r\n          parent: '',\r\n          url: '/create',\r\n          templateUrl: appPath + '/scripts/states/admin/create-product.html',\r\n          controller: 'CreateProductController',\r\n          controllerAs: 'vm'\r\n        }).state('edit', {\r\n          parent: '',\r\n          url: '/edit/:id',\r\n          templateUrl: appPath + '/scripts/states/admin/edit-product.html',\r\n          controller: 'EditProductController',\r\n          controllerAs: 'vm',\r\n          resolve: {\r\n            product: function product($stateParams, productsService) {\r\n              return productsService.getProduct($stateParams.id);\r\n            }\r\n          }\r\n        });\r\n      });\r\n      'use strict';\r\n      angular.module('admin').controller('EditProductController', function EditProductController($state, productsService, product) {\r\n        var vm = this;\r\n        vm.product = product;\r\n        vm.submit = function (product) {\r\n          productsService.updateProduct(product).then(onProductUpdated);\r\n        };\r\n        function onProductUpdated() {\r\n          $state.go('admin');\r\n        }\r\n      });\r\n      'use strict';\r\n      angular.module('admin').controller('CreateProductController', function CreateProductController($state, productsService) {\r\n        var vm = this;\r\n        vm.product = {};\r\n        vm.submit = function (product) {\r\n          productsService.createProduct(product).then(onProductCreated);\r\n        };\r\n        function onProductCreated() {\r\n          $state.go('admin');\r\n        }\r\n      });\r\n      'use strict';\r\n      angular.module('admin').controller('ProductManagementController', function ProductManagementController(productsService, products) {\r\n        var vm = this;\r\n        vm.products = products;\r\n        vm.deleteProduct = function (product) {\r\n          productsService.deleteProduct(product.id).then(onProductDeleted);\r\n        };\r\n        function onProductDeleted() {\r\n          productsService.getProducts().then(function (products) {\r\n            vm.products = products;\r\n          });\r\n        }\r\n      });\r\n      'use strict';\r\n      angular.module('basketStatus', [\r\n        'env',\r\n        'basket'\r\n      ]).directive('basketStatus', function basketStatusDirective(appPath, basket) {\r\n        function link(scope, element) {\r\n          scope.getTotalItems = function () {\r\n            return basket.count();\r\n          };\r\n        }\r\n        return {\r\n          restrict: 'A',\r\n          templateUrl: appPath + '/scripts/directives/basket-status/basket-status.html',\r\n          scope: true,\r\n          replace: true,\r\n          link: link\r\n        };\r\n      });\r\n      'use strict';\r\n      angular.module('rating', ['env']).directive('rating', function (appPath) {\r\n        function link(scope) {\r\n          scope.stars = [];\r\n          scope.stars.length = scope.rating;\r\n        }\r\n        return {\r\n          restrict: 'A',\r\n          templateUrl: appPath + '/scripts/directives/rating/rating.html',\r\n          scope: { rating: '=' },\r\n          link: link\r\n        };\r\n      });\r\n      'use strict';\r\n      angular.module('productsService', ['env']).factory('productsService', function productsService($http, apiPath) {\r\n        function getProducts() {\r\n          return $http.get(apiPath + '/products/').then(function (response) {\r\n            return response.data;\r\n          });\r\n        }\r\n        function getProduct(id) {\r\n          return $http.get(apiPath + '/products/' + id).then(function (response) {\r\n            return response.data;\r\n          });\r\n        }\r\n        function updateProduct(product) {\r\n          return $http.put(apiPath + '/products/' + product.id, product).then(function (response) {\r\n            return response.data;\r\n          });\r\n        }\r\n        function createProduct(product) {\r\n          return $http.post(apiPath + '/products/', product).then(function (response) {\r\n            return response.data;\r\n          });\r\n        }\r\n        function deleteProduct(id) {\r\n          return $http.delete(apiPath + '/products/' + id).then(function (response) {\r\n            return response.data;\r\n          });\r\n        }\r\n        return {\r\n          getProducts: getProducts,\r\n          getProduct: getProduct,\r\n          updateProduct: updateProduct,\r\n          createProduct: createProduct,\r\n          deleteProduct: deleteProduct\r\n        };\r\n      });\r\n      'use strict';\r\n      angular.module('orderService', ['env']).factory('orderService', function ($http, apiPath) {\r\n        function placeOrder(order) {\r\n          return $http.post(apiPath + '/checkout/', order).then(function (response) {\r\n            return response.data;\r\n          });\r\n        }\r\n        return { placeOrder: placeOrder };\r\n      });\r\n      'use strict';\r\n      angular.module('basket', []).factory('basket', function () {\r\n        var products = [];\r\n        var productAmount = Object.create(null);\r\n        var totalItems = 0;\r\n        function add(product) {\r\n          var productId = product.id;\r\n          if (productAmount[productId]) {\r\n            productAmount[productId]++;\r\n          } else {\r\n            products.push(product);\r\n            productAmount[productId] = 1;\r\n          }\r\n          totalItems++;\r\n        }\r\n        function remove(product) {\r\n          var productId = product.id;\r\n          var amount = productAmount[productId];\r\n          if (amount) {\r\n            productAmount[productId]--;\r\n            if (amount <= 1) {\r\n              delete productAmount[productId];\r\n              products = products.filter(function (p) {\r\n                return p.id !== productId;\r\n              });\r\n            }\r\n            totalItems--;\r\n          }\r\n        }\r\n        function clear() {\r\n          products.length = 0;\r\n          productAmount = Object.create(null);\r\n          totalItems = 0;\r\n        }\r\n        function count() {\r\n          return totalItems;\r\n        }\r\n        function getProductAmount(productId) {\r\n          return productAmount[productId] || 0;\r\n        }\r\n        function getProductAmounts() {\r\n          return productAmount;\r\n        }\r\n        function getProducts() {\r\n          return products;\r\n        }\r\n        function getTotal() {\r\n          var total = 0;\r\n          products.forEach(function (product) {\r\n            var amount = productAmount[product.id];\r\n            if (!amount) {\r\n              return;\r\n            }\r\n            total += amount * product.price;\r\n          });\r\n          return total;\r\n        }\r\n        return {\r\n          getProducts: getProducts,\r\n          add: add,\r\n          remove: remove,\r\n          clear: clear,\r\n          count: count,\r\n          getProductAmount: getProductAmount,\r\n          getProductAmounts: getProductAmounts,\r\n          getTotal: getTotal\r\n        };\r\n      });\r\n      'use strict';\r\n      angular.module('states', [\r\n        'products',\r\n        'admin',\r\n        'checkout'\r\n      ]);\r\n      angular.module('services', [\r\n        'basket',\r\n        'orderService',\r\n        'productsService'\r\n      ]);\r\n      angular.module('directives', [\r\n        'basketStatus',\r\n        'rating'\r\n      ]);\r\n      angular.module('shopping', [\r\n        'ui.router',\r\n        'env',\r\n        'states',\r\n        'services',\r\n        'directives'\r\n      ]).config(function ($urlRouterProvider, $logProvider, debug) {\r\n        $logProvider.debugEnabled(debug);\r\n        $urlRouterProvider.otherwise('/');\r\n      }).run(function ($log, debug) {\r\n        $log.info('Shopping application is running in ' + (debug ? 'debug' : 'production') + ' mode.');\r\n      });\r\n      'use strict';\r\n      angular.module('shopping').controller('HeaderController', function HeaderController($state) {\r\n        var vm = this;\r\n        vm.shouldShowBasketStatus = function () {\r\n          return $state.includes('products');\r\n        };\r\n      });\r\n    }(window, document, window.angular));\n//# sourceMappingURL=app.dev.js.map\n","angular\r\n  .module('products', ['ui.router', 'env'])\r\n  .config(function ($stateProvider, appPath) {\r\n    $stateProvider.state('products', {\r\n      url: '/',\r\n      templateUrl: appPath + '/scripts/states/products/products.html',\r\n      controller: 'ProductsController',\r\n      controllerAs: 'vm',\r\n      resolve: {\r\n        products: function (productsService) {\r\n          return productsService.getProducts();\r\n        }\r\n      }\r\n    });\r\n  });\r\n","angular\r\n  .module('products')\r\n  .controller('ProductsController', function ProductsController(products, basket) {\r\n    const vm = this;\r\n    vm.products = products;\r\n\r\n    vm.addToBasket = function (product) {\r\n      return basket.add(product);\r\n    };\r\n\r\n    vm.isProductInBasket = function (product) {\r\n      return !!basket.getProductAmount(product.id);\r\n    };\r\n\r\n    vm.getProductAmount = function (product) {\r\n      return basket.getProductAmount(product.id);\r\n    };\r\n  });\r\n","angular\r\n  .module('checkout', ['ui.router', 'env'])\r\n  .config(function ($stateProvider, appPath) {\r\n    $stateProvider.state('checkout', {\r\n      url: '/checkout',\r\n      templateUrl: appPath + '/scripts/states/checkout/checkout.html',\r\n      controller: 'CheckoutController',\r\n      controllerAs: 'vm'\r\n    });\r\n  });\r\n","angular\r\n  .module('checkout')\r\n  .controller('CheckoutController', function CheckoutController($state, basket, orderService) {\r\n    const vm = this;\r\n\r\n    vm.address = getEmptyAddress();\r\n\r\n    loadBasketProducts();\r\n\r\n    vm.getProductAmount = function (product) {\r\n      return basket.getProductAmount(product.id);\r\n    };\r\n\r\n    vm.increase = function (product) {\r\n      basket.add(product);\r\n    };\r\n\r\n    vm.decrease = function (product) {\r\n      basket.remove(product);\r\n      loadBasketProducts();\r\n    };\r\n\r\n    vm.clearBasket = function () {\r\n      basket.clear();\r\n      vm.address = getEmptyAddress();\r\n    };\r\n\r\n    vm.submit = function () {\r\n      let basketAmounts = basket.getProductAmounts();\r\n      let orderAmounts = [];\r\n\r\n      for (let key in basketAmounts) {\r\n        orderAmounts.push({\r\n          productId: key,\r\n          amount: basketAmounts[key]\r\n        });\r\n      }\r\n\r\n      let order = {\r\n        deliveryAddress: vm.address,\r\n        products: orderAmounts\r\n      };\r\n\r\n      orderService.placeOrder(order).then(function () {\r\n        basket.clear();\r\n        // TODO: show the success message in the modal dialogue or as a floating message.\r\n        alert('Your order has been successfully placed.');\r\n        $state.go('products');\r\n      });\r\n    };\r\n\r\n    vm.getTotal = function () {\r\n      return basket.getTotal();\r\n    };\r\n\r\n    function loadBasketProducts() {\r\n      vm.basketProducts = basket.getProducts();\r\n    }\r\n\r\n    function getEmptyAddress() {\r\n      return {\r\n        firstName: '',\r\n        lastName: '',\r\n        firstAddressLine: '',\r\n        secondAddressLine: '',\r\n        postCode: '',\r\n        city: ''\r\n      };\r\n    }\r\n  });\r\n","angular\r\n  .module('admin', ['ui.router', 'env'])\r\n  .config(function ($stateProvider, appPath) {\r\n    $stateProvider.state('admin', {\r\n      url: '/admin',\r\n      templateUrl: appPath + '/scripts/states/admin/admin.html',\r\n      controller: 'ProductManagementController',\r\n      controllerAs: 'vm',\r\n      resolve: {\r\n        products: function (productsService) {\r\n          return productsService.getProducts();\r\n        }\r\n      }\r\n    })\r\n    .state('create', {\r\n      parent: '',\r\n      url: '/create',\r\n      templateUrl: appPath + '/scripts/states/admin/create-product.html',\r\n      controller: 'CreateProductController',\r\n      controllerAs: 'vm'\r\n    })\r\n    .state('edit', {\r\n      parent: '',\r\n      url: '/edit/:id',\r\n      templateUrl: appPath + '/scripts/states/admin/edit-product.html',\r\n      controller: 'EditProductController',\r\n      controllerAs: 'vm',\r\n      resolve: {\r\n        product: function ($stateParams, productsService) {\r\n          return productsService.getProduct($stateParams.id);\r\n        }\r\n      }\r\n    });\r\n  });\r\n","angular\r\n  .module('admin')\r\n  .controller('EditProductController', function EditProductController($state, productsService, product) {\r\n    const vm = this;\r\n\r\n    vm.product = product;\r\n\r\n    vm.submit = function (product) {\r\n      productsService.updateProduct(product).then(onProductUpdated);\r\n    };\r\n\r\n    function onProductUpdated() {\r\n      $state.go('admin');\r\n    }\r\n  });\r\n","angular\r\n  .module('admin')\r\n  .controller('CreateProductController', function CreateProductController($state, productsService) {\r\n    const vm = this;\r\n\r\n    vm.product = {};\r\n\r\n    vm.submit = function (product) {\r\n      productsService.createProduct(product).then(onProductCreated);\r\n    };\r\n\r\n    function onProductCreated() {\r\n      $state.go('admin');\r\n    }\r\n  });\r\n","angular\r\n  .module('admin')\r\n  .controller('ProductManagementController', function ProductManagementController(productsService, products) {\r\n    const vm = this;\r\n\r\n    vm.products = products;\r\n\r\n    vm.deleteProduct = function (product) {\r\n      productsService.deleteProduct(product.id).then(onProductDeleted);\r\n    };\r\n\r\n    function onProductDeleted() {\r\n      productsService.getProducts().then(function (products) {\r\n        vm.products = products;\r\n      });\r\n    }\r\n  });\r\n","angular\r\n  .module('rating', ['env'])\r\n  .directive('rating', function (appPath) {\r\n    function link(scope) {\r\n      scope.stars = [];\r\n      scope.stars.length = scope.rating;\r\n    }\r\n\r\n    return {\r\n      restrict: 'A',\r\n      templateUrl: `${appPath}/scripts/directives/rating/rating.html`,\r\n      scope: {\r\n        rating: '='\r\n      },\r\n      link\r\n    }\r\n  });\r\n","angular\r\n  .module('basketStatus', ['env', 'basket'])\r\n  .directive('basketStatus', function basketStatusDirective(appPath, basket) {\r\n    function link(scope, element) {\r\n      scope.getTotalItems = function () {\r\n        return basket.count();\r\n      };\r\n    }\r\n\r\n    return {\r\n      restrict: 'A',\r\n      templateUrl: `${appPath}/scripts/directives/basket-status/basket-status.html`,\r\n      scope: true,\r\n      replace: true,\r\n      link\r\n    };\r\n  });\r\n","angular\r\n  .module('productsService', ['env'])\r\n  .factory('productsService', function productsService($http, apiPath) {\r\n    function getProducts() {\r\n      return $http.get(`${apiPath}/products/`).then(response => response.data);\r\n    }\r\n\r\n    function getProduct(id) {\r\n      return $http.get(`${apiPath}/products/${id}`).then(response => response.data);\r\n    }\r\n\r\n    function updateProduct(product) {\r\n      return $http.put(`${apiPath}/products/${product.id}`, product).then(response => response.data);\r\n    }\r\n\r\n    function createProduct(product) {\r\n      return $http.post(`${apiPath}/products/`, product).then(response => response.data);\r\n    }\r\n\r\n    function deleteProduct(id) {\r\n      return $http.delete(`${apiPath}/products/${id}`).then(response => response.data);\r\n    }\r\n\r\n    return { getProducts, getProduct, updateProduct, createProduct, deleteProduct };\r\n  });\r\n","angular\r\n  .module('orderService', ['env'])\r\n  .factory('orderService', function ($http, apiPath) {\r\n    function placeOrder(order) {\r\n      return $http.post(`${apiPath}/checkout/`, order).then(response => response.data);\r\n    }\r\n\r\n    return { placeOrder };\r\n  });\r\n","angular\r\n  .module('basket', [])\r\n  .factory('basket', function () {\r\n    let products = [];\r\n    let productAmount = Object.create(null);\r\n    let totalItems = 0;\r\n\r\n    function add(product) {\r\n      let productId = product.id;\r\n      if (productAmount[productId]) {\r\n        productAmount[productId]++;\r\n      } else {\r\n        products.push(product);\r\n        productAmount[productId] = 1;\r\n      }\r\n      totalItems++;\r\n    }\r\n\r\n    function remove(product) {\r\n      let productId = product.id;\r\n      let amount = productAmount[productId];\r\n      if (amount) {\r\n        productAmount[productId]--;\r\n        if (amount <= 1) {\r\n          delete productAmount[productId];\r\n          products = products.filter(p => p.id !== productId);\r\n        }\r\n        totalItems--;\r\n      }\r\n    }\r\n\r\n    function clear() {\r\n      products.length = 0;\r\n      productAmount = Object.create(null);\r\n      totalItems = 0;\r\n    }\r\n\r\n    function count() {\r\n      return totalItems;\r\n    }\r\n\r\n    function getProductAmount(productId) {\r\n      return productAmount[productId] || 0;\r\n    }\r\n\r\n    function getProductAmounts() {\r\n      return productAmount;\r\n    }\r\n\r\n    function getProducts() {\r\n      return products;\r\n    }\r\n\r\n    function getTotal() {\r\n      let total = 0;\r\n\r\n      products.forEach(function (product) {\r\n        let amount = productAmount[product.id];\r\n        if (!amount) {\r\n          return;\r\n        }\r\n\r\n        total += amount * product.price;\r\n      });\r\n\r\n      return total;\r\n    }\r\n\r\n    return { getProducts, add, remove, clear, count, getProductAmount, getProductAmounts, getTotal };\r\n  });\r\n","'use strict';\r\n\r\nangular.module('states', ['products', 'admin', 'checkout']);\r\n\r\nangular.module('services', ['basket', 'orderService', 'productsService']);\r\n\r\nangular.module('directives', ['basketStatus', 'rating']);\r\n\r\nangular\r\n  .module('shopping', ['ui.router', 'env', 'states', 'services', 'directives'])\r\n  .config(function ($urlRouterProvider, $logProvider, debug) {\r\n    $logProvider.debugEnabled(debug);\r\n    $urlRouterProvider.otherwise(\"/\");\r\n  })\r\n  .run(function ($log, debug) {\r\n    $log.info(`Shopping application is running in ${debug ? 'debug' : 'production'} mode.`);\r\n  });\r\n","'use strict';\r\n\r\nangular\r\n  .module('shopping')\r\n  .controller('HeaderController', function HeaderController($state) {\r\n    const vm = this;\r\n\r\n    vm.shouldShowBasketStatus = function () {\r\n      return $state.includes('products');\r\n    };\r\n  });\r\n"],"sourceRoot":"./scripts"}